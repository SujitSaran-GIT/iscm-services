# ==============================
# PRODUCTION ENVIRONMENT CONFIGURATION
# ==============================
# This file contains production-specific settings
# ALL secrets must be provided via environment variables

# ==============================
# SERVICE URLS
# ==============================
iam.service.url=${IAM_SERVICE_URL}

# ==============================
# REDIS CONFIGURATION
# ==============================
spring.redis.host=${REDIS_HOST}
spring.redis.port=${REDIS_PORT}
spring.redis.password=${REDIS_PASSWORD}
spring.redis.timeout=5000ms
spring.redis.lettuce.pool.max-active=20
spring.redis.lettuce.pool.max-idle=10
spring.redis.lettuce.pool.min-idle=5

# ==============================
# CIRCUIT BREAKER - PRODUCTION SETTINGS
# ==============================
resilience4j.circuitbreaker:
  configs:
    default:
      failureRateThreshold: 30  # Lower threshold for prod
      waitDurationInOpenState: 60s  # Longer wait time for prod
      slidingWindowSize: 20  # Larger window for prod
      minimumNumberOfCalls: 10  # More calls required for prod
      permittedNumberOfCallsInHalfOpenState: 5
      slowCallDurationThreshold: 2s
      slowCallRateThreshold: 40

# ==============================
# RATE LIMITING - STRICHER FOR PRODUCTION
# ==============================
spring.cloud.gateway.filter.request-rate-limiter:
  enabled: true

# ==============================
# LOGGING - REDUCED FOR PRODUCTION
# ==============================
logging.level.org.springframework.cloud.gateway=WARN
logging.level.org.springframework.web.reactive=WARN
logging.level.reactor.netty=WARN

# ==============================
# PERFORMANCE MONITORING
# ==============================
management.metrics.export.prometheus.enabled=true
management.endpoint.metrics.enabled=true