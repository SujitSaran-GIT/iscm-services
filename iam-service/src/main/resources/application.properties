# ========== Server / Context Path ==========
server.port = 8081
server.servlet.context-path = /iam

# ========== Application Name ==========
spring.application.name = iam-service

# ========== Datasource / PostgreSQL / Hikari ==========
spring.datasource.url = jdbc:postgresql://localhost:5432/iscm_iam
spring.datasource.username = postgres
spring.datasource.password = password
spring.datasource.driver-class-name = org.postgresql.Driver

spring.datasource.hikari.maximum-pool-size = 10
spring.datasource.hikari.minimum-idle = 2
spring.datasource.hikari.connection-timeout = 30000
spring.datasource.hikari.idle-timeout = 600000
spring.datasource.hikari.max-lifetime = 1800000

# ========== JPA / Hibernate ==========
spring.jpa.hibernate.ddl-auto = validate
spring.jpa.show-sql = false
spring.jpa.properties.hibernate.dialect = org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql = true
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation = true

# ========== Liquibase (migrations) ==========
spring.liquibase.change-log = classpath:db/changelog/db.changelog-master.yaml
spring.liquibase.enabled = true

# ========== Redis (if used) ==========
spring.data.redis.host = localhost
spring.data.redis.port = 6379

# ========== Mail settings ==========
spring.mail.host = localhost
spring.mail.port = 1025
spring.mail.properties.mail.smtp.auth = false
spring.mail.properties.mail.smtp.starttls.enable = false

# ========== JWT & Security ==========
app.jwt.secret = mySuperSecretKeyThatIsAtLeast32CharactersLong123!
app.jwt.expiration.access = 900
app.jwt.expiration.refresh = 604800

app.security.max-login-attempts = 5
app.security.account-lock-duration-minutes = 30

# ========== Logging ==========
logging.level.com.iscm = DEBUG
logging.level.org.springframework.security = INFO
logging.level.org.hibernate.SQL = WARN
logging.pattern.console = "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"

# ========== Actuator / Management ==========
management.endpoints.web.exposure.include = health,info,metrics,prometheus
management.endpoints.web.base-path = /actuator
management.endpoint.health.show-details = always
management.endpoint.health.show-components = always
management.endpoint.metrics.enabled = true
management.endpoint.prometheus.enabled = true

# ========== Springdoc / OpenAPI ==========
springdoc.api-docs.path = /v3/api-docs
springdoc.swagger-ui.path = /swagger-ui.html
springdoc.swagger-ui.operations-sorter = method
springdoc.swagger-ui.tags-sorter = alpha
